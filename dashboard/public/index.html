<!-- DEPRECATED: This legacy dashboard is served only when dist/ is not built.
     Use the React app (npm run build) for the full-featured dashboard.
     This file will be removed in a future version. -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Team-Shinchan Dashboard</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>

<!-- ── 연결 끊김 알림 바 (상단 슬라이드 다운) ── -->
<div class="conn-alert-bar" id="conn-alert-bar" role="alert" aria-live="assertive">
  <span id="conn-alert-icon">⚠️</span>
  <span id="conn-alert-text">대시보드 연결이 끊어졌습니다. 자동 재연결 중...</span>
</div>

<div class="app">

  <!-- ── 헤더 ── -->
  <header class="header">
    <div class="header-brand">
      <div class="logo">👦</div>
      <div>
        <h1>Team-Shinchan Dashboard</h1>
        <div class="subtitle">Multi-Agent Workflow Monitor</div>
      </div>
    </div>

    <div class="conn-badge disconnected" id="conn-badge" aria-label="연결 상태: 연결 끊김" role="status">
      <div class="conn-dot"></div>
      <span id="conn-label">Disconnected</span>
    </div>
  </header>

  <!-- ── 사이드바 (에이전트 목록) ── -->
  <aside class="sidebar" id="sidebar">
    <!-- JS가 렌더링 -->
  </aside>

  <!-- ── 메인 ── -->
  <main class="main">

    <!-- 워크플로우 프로그레스 바 -->
    <div class="workflow-bar">
      <div class="workflow-title">
        Workflow Stage
        <span class="phase-info" id="phase-info" style="display:none"></span>
      </div>
      <div class="stages" id="stages">
        <!-- JS가 렌더링 -->
      </div>
    </div>

    <!-- Phase 진행률 섹션 (phase 정보 있을 때만 표시) -->
    <div class="phase-progress-bar" id="phase-progress-bar" aria-label="Phase 진행률">
      <div class="phase-progress-header">
        <div class="phase-progress-label">Phase Progress</div>
        <div style="display:flex;align-items:center;">
          <div class="phase-progress-counter" id="phase-counter"></div>
          <span class="progress-percentage" id="progress-pct" style="display:none"></span>
        </div>
      </div>
      <div class="phase-progress-title" id="phase-title" style="display:none"></div>
      <div class="phase-dots" id="phase-dots" role="list" aria-label="Phase 목록"></div>
      <!-- 전체 퍼센트 바 -->
      <div class="progress-bar" id="overall-progress-bar" style="display:none">
        <div class="progress-fill" id="overall-progress-fill" style="width:0%"></div>
      </div>
      <!-- Phase별 미니 프로그레스 바 목록 -->
      <div class="phase-mini-bars" id="phase-mini-bars"></div>
    </div>

    <!-- 실시간 메트릭 바 -->
    <div class="metrics-bar" id="metrics-bar">
      <div class="metric-item">
        <span class="metric-label">Active</span>
        <span class="metric-value active" id="metric-active">0</span>
      </div>
      <div class="metric-sep"></div>
      <div class="metric-item">
        <span class="metric-label">Elapsed</span>
        <span class="metric-value" id="metric-elapsed">--:--</span>
      </div>
      <div class="metric-sep"></div>
      <div class="metric-item">
        <span class="metric-label">Events</span>
        <span class="metric-value" id="metric-events">0</span>
      </div>
    </div>

    <!-- 위임 흐름 시각화 섹션 (위임 없으면 숨김) -->
    <div class="delegation-section" id="delegation-section">
      <div class="delegation-section-title">현재 위임 흐름</div>
      <div class="delegation-chain" id="delegation-chain">
        <!-- JS가 동적으로 렌더링 -->
      </div>
    </div>

    <!-- 탭 바 -->
    <div class="tab-bar" role="tablist" aria-label="뷰 선택">
      <button class="tab active" data-tab="timeline" role="tab" aria-selected="true" aria-controls="tab-timeline" title="활동 타임라인">
        <span class="tab-label-full">타임라인</span>
        <span class="tab-label-short">📡</span>
      </button>
      <button class="tab" data-tab="chat" role="tab" aria-selected="false" aria-controls="tab-chat" title="에이전트 대화">
        <span class="tab-label-full">대화</span>
        <span class="tab-label-short">💬</span>
      </button>
      <button class="tab" data-tab="debate" role="tab" aria-selected="false" aria-controls="tab-debate" title="토론">
        <span class="tab-label-full">토론</span>
        <span class="tab-label-short">🌻</span>
      </button>
      <button class="tab" data-tab="docs" role="tab" aria-selected="false" aria-controls="tab-docs" title="워크플로우 문서">
        <span class="tab-label-full">문서</span>
        <span class="tab-label-short">📄</span>
      </button>
    </div>

    <!-- 탭 1: 타임라인 -->
    <div class="tab-content" id="tab-timeline" role="tabpanel" aria-labelledby="tab-timeline-btn">
      <!-- 활동 타임라인 -->
      <div class="timeline-section">
        <div class="timeline-header">
          <div class="timeline-title">Activity Timeline</div>
          <div class="event-count" id="event-count" aria-live="polite">0 events</div>
        </div>
        <div class="timeline" id="timeline" role="log" aria-label="활동 이벤트 목록" aria-live="polite">
          <div class="timeline-empty" id="timeline-empty">
            <div class="empty-icon">📡</div>
            <div class="empty-text">아직 활동이 없습니다</div>
            <div class="empty-hint">워크플로우를 시작하면 여기에 활동이 표시됩니다</div>
          </div>
        </div>
      </div>
    </div>

    <!-- 탭 2: 채팅 (대화) -->
    <div class="tab-content hidden" id="tab-chat" role="tabpanel" aria-labelledby="tab-chat-btn">
      <div class="chat-container" id="chat-container" role="log" aria-label="에이전트 대화" aria-live="polite">
        <div class="chat-empty" id="chat-empty">
          <div class="empty-icon">💬</div>
          <div class="empty-text">에이전트 대화가 여기에 표시됩니다</div>
          <div class="empty-hint">에이전트가 작업을 시작하면 대화 내용이 표시됩니다</div>
        </div>
      </div>
    </div>

    <!-- 탭 3: 토론 (Debate) -->
    <div class="tab-content hidden" id="tab-debate" role="tabpanel" aria-labelledby="tab-debate-btn">
      <div class="debate-container" id="debate-container">
        <div class="debate-empty" id="debate-empty">
          <div class="empty-icon">🌻</div>
          <div class="empty-text">진행 중인 토론이 없습니다</div>
          <div class="empty-hint">에이전트 간 토론이 시작되면 이 탭이 자동으로 활성화됩니다</div>
        </div>
      </div>
    </div>

    <!-- 탭 4: 문서 뷰어 (Docs) -->
    <div class="tab-content hidden" id="tab-docs" role="tabpanel" aria-labelledby="tab-docs-btn">
      <div class="docs-container">
        <!-- 파일 목록 사이드바 -->
        <div class="docs-sidebar" id="docs-sidebar">
          <div class="docs-sidebar-title">문서</div>
          <div id="docs-file-list">
            <!-- JS가 렌더링 -->
          </div>
        </div>
        <!-- 본문 영역 -->
        <div class="docs-body" id="docs-body">
          <div class="docs-empty" id="docs-empty">
            <div class="empty-icon">📄</div>
            <div class="empty-text">문서를 선택하세요</div>
            <div class="empty-hint">왼쪽 목록에서 파일을 클릭하면 마크다운으로 렌더링된 내용이 표시됩니다</div>
          </div>
        </div>
      </div>
    </div>

  </main>

  <!-- ── 푸터 ── -->
  <footer class="footer">
    <div class="footer-left">
      <div class="footer-item">
        <span>Endpoint</span>
        <span id="footer-endpoint">—</span>
      </div>
      <div class="footer-item">
        <span>Stream</span>
        <span id="footer-stream">/api/events/stream</span>
      </div>
    </div>
    <div class="footer-right">
      <div class="footer-item">
        <span>Agents</span>
        <span>15</span>
      </div>
      <div class="footer-item">
        <span>Version</span>
        <span id="footer-version">—</span>
      </div>
      <div class="footer-item">
        <span id="footer-clock">—</span>
      </div>
    </div>
  </footer>

</div><!-- /.app -->

<script src="/app.js"></script>
</body>
</html>
